<?php
/*
 * Synapse Registration form
 * @author Cameron Milton <cameron@anat.org.au>
 */

/**
 * Alters user registration form to hook into the solve360, and mailchimp databases.
 */

 /* variable_get('id') */

//hooks
/**
 * Implements admin().
 */
function SynapseRegister_admin() {
    //solve360key
    $form['SynapseRegister_solve360key'] = array (
        '#type' => 'textfield',
        '#title' => t('solve360 api key'),
        '#default_value' => variable_get('SynapseRegister_solve360key', ''),
        '#description' => t("Solve360 API key"),
        '#required' => TRUE,
    );
    $form['SynapseRegister_mailchimpkey'] = array(
		'#type' => 'textfield',
        '#title' => t('MailChimp api key'),
		'#default_value' => variable_get('SynapseRegister_mailchimpkey', ''),
		'#description' => t("MailChimp API Key"),
		'#required' => TRUE,
	);
    return system_settings_form($form);
}

/**
 * Implements menu().
 */
function SynapseRegister_menu() {
    $items['admin/config/registration'] = array(
        'title' => 'Registration Form',
        'description' => 'Set options for the registration form',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('SynapseRegister_admin'),
        'access arguments' => array('administer permissions'),
        'type' => MENU_NORMAL_ITEM,
    );
    return $items;
}
/**/
//end of admin

/**
 * Implements form_alter().
 */
function SynapseRegister_form_alter(&form, &form_state, $form_id) {
  if ($form_id == 'user_register_form') {
    $form['#validate'][] = 'SynapseRegister_user_register_form_validate';
  }
}

/**
 * Implements form_validate
 */
function SynapseRegister_user_register_form_validate($form, &$form_state) {
	//$form_state['values']['pass']
	//push to solve360 & mailchimp during validation
}
/**/
//end of user registration form

?>
